Briage().add(function(a){a.DOM.Selection=new a.Class(function(c,b){this.document=a.DOM.Node.parse(b);},{extend:a.DOM.Object,prototype:{getRangeList:function(){var c=[];
for(var d=0,b=this.getRangeCount();d<b;d++){c.push(this.getRangeAt(d));}return a.DOM.RangeList.parse(c,this.document);},getRangeCount:function(){return this.$.rangeCount===undefined?1:this.$.rangeCount;
},getRangeAt:function(c){c=c||0;if(this.$.getRangeAt){return a.DOM.Range.parse(this.$.getRangeAt(c),this.document);}else{var b=this.document.$.createRange();
b.setStart(this.$.anchorNode,this.$.anchorOffset);b.setEnd(this.$.focusNode,this.$.focusOffset);return a.DOM.Range.parse(b,this.document);}}}});a.DOM.Range=new a.Class(function(b){},{extend:a.DOM.Object,prototype:{}});
a.DOM.RangeList=new a.Class(function(c){if(!(a.toString.call(c)=="[object Array]"||c.length!==undefined)){c=[c];}var b=this.$=[];a.each(c,function(e,d){if(!isNaN(e)){var f=a.DOM.Range.parse(d);
if(f){b.push(f);}}});},{method:{parse:a.DOM.Object.parse},prototype:{size:function(){return this.$.length;},item:function(b){return this.$[b];},each:function(b){a.each(this.$,b);
}}});a.extend(a.DOM.Document.prototype,{getRangeList:function(){var b=null;if(this.$.getSelection){var c=a.DOM.Selection.parse(this.$.getSelection(),this);
b=c.getRangeList();}else{if(this.getWindow().$.getSelection){var c=a.DOM.Selection.parse(this.getWindow().$.getSelection(),this);b=c.getRangeList();}else{if(this.$.selection){b=a.DOM.RangeList.parse(this.$.selection.createRange(),this);
}}}return b;}});},"range",["dom"]);