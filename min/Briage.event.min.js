Briage().add(function(c){var b=function(e,d){if(d){return/^on/.test(e)?e.replace(/^on/,""):e;}else{return/^on/.test(e)?e:"on"+e;}};var a=(function(){if(window.addEventListener){return function(f,d,e){f.addEventListener(b(d,true),function(g){e.call(f,g);
});};}else{if(window.attachEvent){return function(f,d,e){f.attachEvent(b(d),function(g){e.call(f,g);});};}else{return function(f,d,e){f[b(d)]=function(g){e.call(f,g);
};};}}})();c.DOM.Event=new c.Class(function(){this._later=[];},{extend:c.DOM.Object,prototype:{returnValue:true,cancelBubble:false,preventDefault:function(d){this.returnValue=false;
if(this.$.preventDefault){this.$.preventDefault();}else{this.$.returnValue=false;}if(d){this.stopPropagation();}},stopPropagation:function(){this.cancelBubble=true;
if(this.$.stopPropagation){this.$.stopPropagation();}else{this.$.cancelBubble=true;}},getPageX:function(){return this.$.pageX;},getPageY:function(){return this.$.pageY;
},getPagePos:function(){return[this.getPageX(),this.getPageY()];}}});c.extend(c.DOM.DOM.prototype,{bind:function(d,e){d=b(d);switch(d){case"onload":if(c.document.getReadyState()=="complete"){e.call(this);
}else{this._bind(d,e);}break;default:this._bind(d,e);break;}},once:function(d,e){this.bind(d,function(f){e.call(this,f);var g=arguments.callee;f._later.push(function(){this.unbind(d,g);
});});},_bind:function(f,h){f=b(f);if(!this.getCustomData("event")){this.setCustomData("event",{});}var i=this.getCustomData("event");if(!i[f]){i[f]=[];
}if(!this.getCustomData("listener")){this.setCustomData("listener",{});}var d=this.getCustomData("listener");if(!d[f]){var g=function(e){e=c.DOM.Event.parse(e||window.event);
var j=c.DOM.Node.parse(this);c.each(j.getCustomData("event")[f],function(m,l){var n=l.call(j,e);if(n===false||n===0){e.returnValue=false;}});c.each(e._later,function(){this.call(j);
});if(!e.returnValue){e.preventDefault();}if(e.cancelBubble){e.stopPropagation();}return e.returnValue;};d[f]=g;if(f in this.$){a(this.$,f,g);}else{switch(f){case"onready":break;
}}}i[f].push(h);},unbind:function(d,e){d=b(d);if(this.getCustomData("event")&&this.getCustomData("event")[d]){c.Array.remove(this.getCustomData("event")[d],e);
}},unbindAll:function(d){d=b(d);if(this.getCustomData("event")){this.getCustomData("event")[d]=[];}},fire:function(d){d=b(d);var e=c.DOM.Event.parse({});
if(this.getCustomData("listener")&&this.getCustomData("listener")[d]){this.getCustomData("listener")[d].call(this,e);}if(!e.cancelBubble&&this.getParent&&this.getParent()){this.getParent().fire(d);
}}},true,true);},"event",["dom"]);